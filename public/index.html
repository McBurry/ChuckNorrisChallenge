
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css' integrity='sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm' crossorigin='anonymous'>
    <title>Chuck Norris Challenge</title>
</head>
<body>
    
    <H1 style="text-align:center">Chuck Norris Challenge</H1>

    <div id="userName"></div>

    <br>

    <div id="jokeLists"></div>

    <script>

        getUserInfo();

        async function getUserInfo(){
            const userInfo = await fetch('/api/getUserInfo');
            const data = await userInfo.json();

            const helloTitle = document.createElement('h1');
            helloTitle.textContent = "Hello, " + data.userName;
            document.getElementById('userName').append(helloTitle);
        }

        displayJokes(); 

        async function displayJokes(){
            const response = await fetch('/api/getSentences');
            const data = await response.json();

            for(var i = 0; i < data.length; i++){
                const jokeDiv = document.createElement('div');
                const jokeP = document.createElement('p');

                jokeP.textContent = data[i].joke;

                jokeDiv.append(jokeP);
                document.getElementById('jokeLists').append(jokeDiv);
            }
        }
    
    </script>
    
</body>